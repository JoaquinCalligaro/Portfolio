/* ==========================================================================
   ANIMACIONES KEYFRAME 
   ========================================================================== */

/* IMPORTANT - Visual regressed earlier
   ----------------------------------------------------------------------
   NOTE TO MAINTAINERS:
   - Certain animation rules (previous versions of .animate-expand-vertically
     and .animate-contract-vertically) were removed because they produced
     a visual bug where cards/container and the show-more button jumped.
   - Do NOT reintroduce the previous rules blindly. If you need to change
     entry/exit animations, follow the manual test steps below and prefer
     small, incremental changes.

   Manual test steps after editing animations:
   1) Open the page with the project grid and the show-more button.
   2) Click "Ver todos" → observe entry animation and container expansion.
   3) Click "Ocultar" → observe exit animation and container collapse.
   4) Confirm the button does not jump and cards are hidden only after
      the collapse transition finishes (test various viewport sizes).

   If unsure, open an issue tagged: CSS_ANIMATIONS_VISUAL_BUG and request
   a review. Keep this comment in place to avoid accidental regression.
*/

@keyframes glowing {
  0%,
  100% {
    background-position: 0% 50%;
    transform: scale(1) rotate(0deg);
  }
  50% {
    background-position: 100% 50%;
    transform: scale(1.02) rotate(1deg);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@layer techstack-animations {
  /* Entrance animation for tech icons: avoid using @apply to keep build stable */
  .tech-enter {
    transform: translateY(1.75rem); /* equivalent to translate-y-7 */
    opacity: 0;
    animation: fadeInUp 0.6s ease-out forwards;
  }

  .tech-enter:nth-child(1) {
    animation-delay: 0.1s;
  }
  .tech-enter:nth-child(2) {
    animation-delay: 0.2s;
  }
  .tech-enter:nth-child(3) {
    animation-delay: 0.3s;
  }
  .tech-enter:nth-child(4) {
    animation-delay: 0.4s;
  }
  .tech-enter:nth-child(5) {
    animation-delay: 0.5s;
  }
  .tech-enter:nth-child(6) {
    animation-delay: 0.6s;
  }
  .tech-enter:nth-child(7) {
    animation-delay: 0.7s;
  }
  .tech-enter:nth-child(8) {
    animation-delay: 0.8s;
  }
  .tech-enter:nth-child(9) {
    animation-delay: 0.9s;
  }
}

/* Helper to ensure transform origin and smoother rendering */
.card-inner {
  transform-origin: center center;
  will-change: transform;
}

/* Propiedades que Tailwind no cubre: easing personalizado y will-change */
.card-root {
  will-change: transform;
  /* curva más suave para entrada/salida */
  transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Efecto glassmorph ligero y espejo (no muy intenso) */
@keyframes glassmorph-glow {
  0% {
    filter: brightness(1) saturate(1);
    transform: translateY(0) rotate(0deg);
    opacity: 0.95;
  }
  50% {
    filter: brightness(1.05) saturate(1.02) blur(0.2px);
    transform: translateY(-1px) rotate(0.2deg);
    opacity: 1;
  }
  100% {
    filter: brightness(1) saturate(1);
    transform: translateY(0) rotate(0deg);
    opacity: 0.95;
  }
}

.glassmorph-effect {
  /* versión suave y elegante: reflejo discreto sin sobrepasar colores */
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(4px) saturate(1.03);
  -webkit-backdrop-filter: blur(4px) saturate(1.03);

  box-shadow: 0 2px 10px rgba(2, 6, 23, 0.04);
  transition:
    transform 520ms cubic-bezier(0.2, 0.8, 0.2, 1),
    filter 520ms ease,
    box-shadow 520ms ease;
}

/* sheen: pseudo-element desplazable que simula un reflejo sutil sin cambiar colores */
.glassmorph-effect::before {
  content: '';
  position: absolute;
  top: -40%;
  left: -150%;
  width: 300%;
  height: 180%;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.12) 45%,
    rgba(255, 255, 255, 0.04) 55%,
    rgba(255, 255, 255, 0) 100%
  );
  transform: rotate(-20deg);
  pointer-events: none;
  mix-blend-mode: screen; /* mantiene colores base pero añade brillo */
  opacity: 0.35;
  filter: blur(3px);
  transition:
    opacity 520ms ease,
    transform 520ms ease;
  /* movimiento aún más lento y muy sutil */
  animation: sheen-move 10s ease-in-out infinite;
}

.glassmorph-effect:hover::before {
  opacity: 0.65;
  transform: rotate(-20deg) translateY(-2px) scale(1.005);
}

@keyframes sheen-move {
  0% {
    transform: rotate(-20deg) translateX(-100%);
    opacity: 0;
  }
  30% {
    opacity: 0.9;
  }
  60% {
    opacity: 0.9;
  }
  100% {
    transform: rotate(-20deg) translateX(100%);
    opacity: 0;
  }
}

/* ==========================================================================  
   SHOW MORE PROJECTS STYLES (migrated from show-more-projects.js)  
   ========================================================================== */

.show-more-projects-container {
  transition:
    max-height 0.6s ease-out,
    opacity 0.45s ease-out,
    margin 0.45s ease-out,
    padding 0.45s ease-out;
  overflow: hidden;
}

.animate-expand-vertically {
  animation-name: expand-vertically;
  animation-delay: 200ms;
  animation-duration: 1000ms; /* ajustado al timeout del JS */

  animation-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
  animation-fill-mode: both;
  will-change: transform, opacity;
}

.animate-contract-vertically {
  animation-name: contract-vertically;
  animation-delay: 100ms;
  animation-duration: 500ms;
  animation-timing-function: ease-in-out;
  animation-fill-mode: both;
  will-change: transform, opacity;
}

/* Nueva keyframe para colapso vertical */
@keyframes contract-vertically {
  0% {
    transform: scaleY(1);
    opacity: 1;
  }
  100% {
    transform: scaleY(0.9);
    opacity: 0;
  }
}

.show-more-projects-btn {
  display: inline-block;
  transition:
    transform 600ms cubic-bezier(0.2, 0.9, 0.25, 1),
    margin 600ms cubic-bezier(0.2, 0.9, 0.25, 1),
    opacity 300ms ease;
  will-change: transform, margin, opacity;
}

/* ==========================================================================  
   SHOW MORE BUTTON - Estilos para botón "Mostrar más" con efectos neón
   
   ========================================================================== */

/* Variables específicas para el botón Show More */
:root {
  /* linea de bore animada */
  --showmore-primary: #03e4f4;
  --showmore-text-hover: #050801;
  --showmore-border-width: 1px;
  --showmore-padding-x: 24px;
  --showmore-padding-y: 10px;
  --showmore-letter-spacing: 1px;
  --showmore-border-radius: 12px;
}

/* ==========================================================================
   BASE STYLES - Botón Show More con efectos neón
   ========================================================================== */

.neon-showmore-btn {
  /* Apariencia base */
  overflow: hidden;

  /* Transiciones suaves */
  transition:
    background-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94),
    color 0.4s ease,
    box-shadow 0.4s ease,
    transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);

  /* Optimización */
  will-change: transform, background-color, box-shadow;
  transform-origin: center center;
}

/* Estados interactivos */
.neon-showmore-btn:hover {
  background: var(--showmore-primary);
  color: var(--showmore-text-hover);
  box-shadow:
    0 0 10px var(--showmore-primary),
    0 0 20px var(--showmore-primary),
    0 0 40px var(--showmore-primary);

  transform: translateY(-1px);

  /* Reflejo sutil */
  -webkit-box-reflect: below 0.5px
    linear-gradient(transparent, rgba(0, 0, 0, 0.1));
}

.neon-showmore-btn__border {
  position: absolute;
  display: block;
  pointer-events: none;
  opacity: 0.8;
}

/* Borde superior */
.neon-showmore-btn__border--top {
  top: 0;
  left: 0;
  width: 100%;
  height: var(--showmore-border-width);
  background: linear-gradient(90deg, transparent, var(--showmore-primary));
  animation: showmore-border-top 2s linear infinite;
  border-radius: var(--showmore-border-radius) var(--showmore-border-radius) 0 0; /* Añadir esta línea */
}
@keyframes showmore-border-top {
  0% {
    left: -100%;
  }
  50%,
  100% {
    left: 100%;
  }
}

/* Borde derecho */
.neon-showmore-btn__border--right {
  top: -100%;
  right: 0;
  width: var(--showmore-border-width);
  height: 100%;
  background: linear-gradient(180deg, transparent, var(--showmore-primary));
  animation: showmore-border-right 2s linear infinite;
  animation-delay: 0.5s;
  border-radius: 0 var(--showmore-border-radius) var(--showmore-border-radius) 0; /* Añadir esta línea */
}

@keyframes showmore-border-right {
  0% {
    top: -100%;
  }
  50%,
  100% {
    top: 100%;
  }
}

/* Borde inferior */
.neon-showmore-btn__border--bottom {
  bottom: 0;
  right: 0;
  width: 100%;
  height: var(--showmore-border-width);
  background: linear-gradient(270deg, transparent, var(--showmore-primary));
  animation: showmore-border-bottom 2s linear infinite;
  animation-delay: 1s;
}

@keyframes showmore-border-bottom {
  0% {
    right: -100%;
  }
  50%,
  100% {
    right: 100%;
  }
}

/* Borde izquierdo */
.neon-showmore-btn__border--left {
  bottom: -100%;
  left: 0;
  width: var(--showmore-border-width);
  height: 100%;
  background: linear-gradient(180deg, transparent, var(--showmore-primary));
  animation: showmore-border-left 2s linear infinite;
  animation-delay: 1.5s;
}

@keyframes showmore-border-left {
  0% {
    bottom: -100%;
  }
  50%,
  100% {
    bottom: 100%;
  }
}

/* ==========================================================================
   ACCESIBILIDAD
   ========================================================================== */

/* Reducir animaciones */
@media (prefers-reduced-motion: reduce) {
  .neon-showmore-btn__border {
    animation: none;
  }

  .neon-showmore-btn {
    transition:
      background-color 0.2s ease,
      color 0.2s ease;
  }

  .neon-showmore-btn:hover {
    -webkit-box-reflect: none;
    transform: none;
  }
}

/* Alto contraste */
@media (prefers-contrast: high) {
  .neon-showmore-btn {
    border: 1px solid var(--showmore-primary);
  }

  .neon-showmore-btn:hover {
    border-color: var(--showmore-text-hover);
  }
}
